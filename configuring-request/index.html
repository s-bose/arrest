
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="Shiladitya Bose">
      
      
      
        <link rel="prev" href="../examples/">
      
      
        <link rel="next" href="../resources-services/">
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.0, mkdocs-material-9.5.42">
    
    
      
        <title>Configuring your request - Arrest</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.0253249f.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../assets/_mkdocstrings.css">
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="purple" data-md-color-accent="light-purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#header" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Arrest" class="md-header__button md-logo" aria-label="Arrest" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Arrest
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Configuring your request
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="purple" data-md-color-accent="light-purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 0-7 7c0 2.38 1.19 4.47 3 5.74V17a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1v-2.26c1.81-1.27 3-3.36 3-5.74a7 7 0 0 0-7-7M9 21a1 1 0 0 0 1 1h4a1 1 0 0 0 1-1v-1H9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="deep-purple" data-md-color-accent="purple"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 2a7 7 0 0 1 7 7c0 2.38-1.19 4.47-3 5.74V17a1 1 0 0 1-1 1H9a1 1 0 0 1-1-1v-2.26C6.19 13.47 5 11.38 5 9a7 7 0 0 1 7-7M9 21v-1h6v1a1 1 0 0 1-1 1h-4a1 1 0 0 1-1-1m3-17a5 5 0 0 0-5 5c0 2.05 1.23 3.81 3 4.58V16h4v-2.42c1.77-.77 3-2.53 3-4.58a5 5 0 0 0-5-5"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href=".." class="md-tabs__link">
        
  
    
  
  Introduction

      </a>
    </li>
  

      
        
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../getting-started/" class="md-tabs__link">
          
  
  Getting Started

        </a>
      </li>
    
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../openapi/" class="md-tabs__link">
        
  
    
  
  OpenAPI Integration

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../dev-note/" class="md-tabs__link">
        
  
    
  
  Developer's Note

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../api/" class="md-tabs__link">
        
  
    
  
  API Documentation

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../release-notes/" class="md-tabs__link">
        
  
    
  
  Release Notes

      </a>
    </li>
  

      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../whats-new/" class="md-tabs__link">
        
  
    
  
  What's New?

      </a>
    </li>
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Arrest" class="md-nav__button md-logo" aria-label="Arrest" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Arrest
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Introduction
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Getting Started
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../getting-started/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Getting started
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../examples/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Examples
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Configuring your request
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Configuring your request
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#header" class="md-nav__link">
    <span class="md-ellipsis">
      Header
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#query" class="md-nav__link">
    <span class="md-ellipsis">
      Query
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#body" class="md-nav__link">
    <span class="md-ellipsis">
      Body
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      Additional Configuration
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#path-parameters" class="md-nav__link">
    <span class="md-ellipsis">
      Path parameters
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#using-converters" class="md-nav__link">
    <span class="md-ellipsis">
      Using converters
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../resources-services/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Resources and Services
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../openapi/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    OpenAPI Integration
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../dev-note/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Developer's Note
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../api/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    API Documentation
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../release-notes/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Release Notes
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../whats-new/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    What's New?
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  <h1>Configuring your request</h1>

<p>If you want to enrich your HTTP request with additional arguments such as headers or query parameters, you can specify them in the HTTP request as dictionaries in <code>headers</code> and <code>query</code> fields.</p>
<p>Additionally, Arrest offers custom field types <code>Header</code>, <code>Query</code> and <code>Body</code>, which are inherited from pydantic's <a href="https://docs.pydantic.dev/latest/api/fields/#pydantic.fields.FieldInfo"><code>FieldInfo</code></a>, that you can use in defining your pydantic request model.</p>
<h3 id="header">Header<a class="headerlink" href="#header" title="Permanent link">&para;</a></h3>
<p>You can use the <code>headers</code> keyword-argument in the request method to directly pass a set of key-value pairs as headers.</p>
<div class="admonition example">
<p class="admonition-title">using <code>headers</code> kwarg</p>
<div class="highlight"><pre><span></span><code><span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/posts&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x-max-age&quot;</span><span class="p">:</span> <span class="s2">&quot;20&quot;</span><span class="p">,</span> <span class="s2">&quot;x-organization&quot;</span><span class="p">:</span> <span class="s2">&quot;abc-123&quot;</span><span class="p">})</span>
</code></pre></div>
</div>
<p>If you want resource-wide shared header definition, you can set it in the <code>Resource</code> definition as well. You can use both of these together as all the headers will be collected and sent as a whole.</p>
<div class="admonition example">
<p class="admonition-title">using <code>Resource.headers</code></p>
<div class="highlight"><pre><span></span><code><span class="n">service</span><span class="o">.</span><span class="n">add_resource</span><span class="p">(</span>
    <span class="n">Resource</span><span class="p">(</span>
        <span class="n">route</span><span class="o">=</span><span class="s2">&quot;/user&quot;</span><span class="p">,</span>
        <span class="n">handlers</span><span class="o">=</span><span class="p">[</span>
            <span class="p">(</span><span class="n">Methods</span><span class="o">.</span><span class="n">GET</span><span class="p">,</span> <span class="s2">&quot;/profile&quot;</span><span class="p">),</span>
        <span class="p">],</span>
        <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x-organization&quot;</span><span class="p">:</span> <span class="s2">&quot;abc-123&quot;</span><span class="p">}</span>
    <span class="p">)</span>
<span class="p">)</span>

<span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/posts&quot;</span><span class="p">,</span> <span class="n">headers</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;x-max-age&quot;</span><span class="p">:</span> <span class="s2">&quot;20&quot;</span><span class="p">})</span>
</code></pre></div>
</div>
<p>If you want to define your headers as part of your request model, use <code>arrest.params.Header</code> to specify the header fields in your request.
This is useful when you want to group together all the components of your request inside one data model.</p>
<div class="admonition example">
<p class="admonition-title">using <code>Header</code> class</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">arrest.params</span> <span class="kn">import</span> <span class="n">Header</span>

<span class="k">class</span> <span class="nc">HeaderRequest</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">x_max_age</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Header</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">x_cookie</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Header</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>

<span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/posts&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">HeaderRequest</span><span class="p">(</span><span class="n">x_max_age</span><span class="o">=</span><span class="s2">&quot;20&quot;</span><span class="p">,</span> <span class="s2">&quot;x_cookie&quot;</span><span class="p">:</span> <span class="s2">&quot;xyz&quot;</span><span class="p">))</span>
</code></pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Arrest does NOT convert any non-str values to str and convert <code>snake_case</code> to <code>kebab-case</code> before sending the fields as headers in the request.
If you want to send <code>kebab-case</code> headers you need to:</p>
<ol>
<li>
<p>specify them as <code>kebab-case</code> in the dictionary passed to the <code>headers</code> keyword or Resource class definition.</p>
</li>
<li>
<p>Use <code>alias</code> in your pydantic field (if you are using pydantic@v2 then you need to use <code>serialization_alias</code> instead).</p>
</li>
<li>
<p>Set the pydantic config to <code>allow_population_by_field_name</code> (if pydantic@v2, use <code>ConfigDict.populate_by_name</code>).</p>
</li>
</ol>
<div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">UserRequest</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">x_user_agent</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Header</span><span class="p">(</span><span class="n">serialization_alias</span><span class="o">=</span><span class="s2">&quot;x-user-agent&quot;</span><span class="p">)</span>

    <span class="n">model_config</span> <span class="o">=</span> <span class="n">ConfigDict</span><span class="p">(</span><span class="n">populate_by_name</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

<span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">UserRequest</span><span class="p">(</span><span class="n">x_user_agent</span><span class="o">=</span><span class="s2">&quot;mozila&quot;</span><span class="p">))</span>
<span class="c1"># header = {&quot;x-user-agent&quot;: &quot;mozila&quot;}</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><span class="c1"># using pydantic@v1</span>

<span class="k">class</span> <span class="nc">UserRequest</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">x_user_agent</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Header</span><span class="p">(</span><span class="n">alias</span><span class="o">=</span><span class="s2">&quot;x-user-agent&quot;</span><span class="p">)</span>

    <span class="k">class</span> <span class="nc">Config</span><span class="p">:</span>
        <span class="n">allow_population_by_field_name</span> <span class="o">=</span> <span class="kc">True</span>

<span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">UserRequest</span><span class="p">(</span><span class="n">x_user_agent</span><span class="o">=</span><span class="s2">&quot;mozila&quot;</span><span class="p">))</span>
<span class="c1"># header = {&quot;x-user-agent&quot;: &quot;mozila&quot;}</span>
</code></pre></div>
</div>
<h3 id="query">Query<a class="headerlink" href="#query" title="Permanent link">&para;</a></h3>
<p>Similar to headers, you can provide your request-specific query parameters as a dict to the <code>query</code> kwarg in the request method.</p>
<div class="admonition example">
<p class="admonition-title">using <code>query</code> kwarg</p>
<div class="highlight"><pre><span></span><code><span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/posts&quot;</span><span class="p">,</span> <span class="n">query</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span> <span class="s2">&quot;username&quot;</span><span class="p">:</span> <span class="s2">&quot;abc&quot;</span><span class="p">})</span>
</code></pre></div>
</div>
<p>If you want to define your query parameters as part of your request model, use <code>arrest.params.Query</code> to specify the query fields in your request.
Whatever field is marked as <code>Query</code> will be attached as a query parameter in the request.</p>
<div class="admonition example">
<p class="admonition-title">using <code>Query</code> class</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">arrest.params</span> <span class="kn">import</span> <span class="n">Query</span>

<span class="k">class</span> <span class="nc">QueryRequest</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">limit</span><span class="p">:</span> <span class="nb">int</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Query</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">index</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="kc">None</span> <span class="o">=</span> <span class="n">Query</span><span class="p">()</span>

<span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/posts&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">QueryRequest</span><span class="p">(</span><span class="n">limit</span><span class="o">=</span><span class="mi">100</span><span class="p">,</span> <span class="n">name</span><span class="o">=</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">=</span><span class="mi">10</span><span class="p">))</span>
</code></pre></div>
</div>
<h3 id="body">Body<a class="headerlink" href="#body" title="Permanent link">&para;</a></h3>
<p>Request body is supplied with the keyword argument <code>request</code> in your call.
This can be a pydantic instance, a simple dictionary, a list or any object that can be jsonified.</p>
<p>However, if the handler for the path has a request type specified, the request body must match the type (or be convertible to it).
You can make use of <code>arrest.params.Body</code> when defining the body fields, although fields that don't have any defaults will be automatically parsed as body.</p>
<div class="admonition example">
<p class="admonition-title">using request type</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">arrest.params</span> <span class="kn">import</span> <span class="n">Body</span>

<span class="k">class</span> <span class="nc">BodyRequest</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="n">Body</span><span class="p">(</span><span class="o">...</span><span class="p">)</span>
    <span class="n">email</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">password</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">role</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">str</span><span class="p">]</span>
    <span class="n">is_active</span><span class="p">:</span> <span class="nb">bool</span>

<span class="c1"># both of the following should work</span>
<span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="n">BodyRequest</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="n">email</span><span class="o">=</span><span class="s2">&quot;abc@email.com&quot;</span><span class="p">,</span> <span class="n">password</span><span class="o">=</span><span class="s2">&quot;123&quot;</span><span class="p">,</span> <span class="n">role</span><span class="o">=</span><span class="s2">&quot;ADMIN&quot;</span><span class="p">,</span> <span class="n">is_active</span><span class="o">=</span><span class="kc">False</span><span class="p">))</span>
<span class="k">await</span> <span class="n">service</span><span class="o">.</span><span class="n">user</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">,</span> <span class="n">request</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;abc&quot;</span><span class="p">,</span> <span class="s2">&quot;email&quot;</span><span class="p">:</span> <span class="s2">&quot;abc@email.com&quot;</span><span class="p">,</span> <span class="s2">&quot;password&quot;</span><span class="p">:</span> <span class="s2">&quot;123&quot;</span><span class="p">,</span> <span class="s2">&quot;role&quot;</span><span class="p">:</span> <span class="s2">&quot;ADMIN&quot;</span><span class="p">,</span> <span class="s2">&quot;is_active&quot;</span><span class="p">:</span> <span class="kc">False</span><span class="p">})</span>
</code></pre></div>
</div>
<p>If you do not have a request type specified to the handler, you can still pass a pydantic object but no model validation will take place and Arrest will extract the fields as per their defaults.
You can also pass a plain dictionary or a list as request. They will get passed as json payload.</p>
<div class="admonition note">
<p class="admonition-title">regarding json payloads</p>
<p>Arrest uses <code>orjson</code> for serializing the request payload. This was chosen because the stdlib <code>json</code> does not parse datetime which <code>orjson</code> does.</p>
</div>
<h3 id="additional-configuration">Additional Configuration<a class="headerlink" href="#additional-configuration" title="Permanent link">&para;</a></h3>
<p>Arrest also allows providing other http parameters such as cookies, auth, transport, etc, or even your own instance of <code>httpx.AsyncClient</code> (or other classes subclassing it), if you choose to do so.
If you want to customize the httpx client and specify more parameters either at resource-level or at service-level, you can check out <a href="../resources-services/#resources">Resources &amp; Services</a>.</p>
<h3 id="path-parameters">Path parameters<a class="headerlink" href="#path-parameters" title="Permanent link">&para;</a></h3>
<p>Path parameters are a bit tricky as they are not set as pydantic fields.
To define a handler that takes a path parameter, you have to specify the path-params inside curlys with (optional) their types.</p>
<div class="highlight"><pre><span></span><code><span class="n">Resource</span><span class="p">(</span>
    <span class="n">route</span><span class="o">=</span><span class="s2">&quot;/abc&quot;</span><span class="p">,</span>
    <span class="n">handlers</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;/user/</span><span class="si">{user_id}</span><span class="s2">&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;/user/{user_id:uuid}&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="s2">&quot;GET&quot;</span><span class="p">,</span> <span class="s2">&quot;/user/</span><span class="si">{user_id}</span><span class="s2">/comments/{comment_id:int}&quot;</span><span class="p">)</span>
    <span class="p">]</span>
<span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Regarding multiple handlers</p>
<p>If you specify handlers with the same path parameter but different type hints, the most recent one will override all the others. So in the above example, we only have one handler <code>GET /user/{user_id:uuid}</code></p>
<p>This is because we keep track of unique handlers with the pair <code>&lt;method, route&gt;</code> where <code>route</code> is the handler route with its type hint removed.
Subsequent handler definitions with varying path parameter types will thus override the entry.</p>
</div>
<p>There are many ways you can supply the path param. The most common way is to use a python f-string (considering the path-param is dynamic)</p>
<div class="highlight"><pre><span></span><code><span class="o">...</span>
<span class="n">user_id</span> <span class="o">=</span> <span class="n">uuid</span><span class="o">.</span><span class="n">UUID</span><span class="p">(</span><span class="s2">&quot;ca80a889-8811-4e65-86bb-5e7c0c6e07cf&quot;</span><span class="p">)</span>

<span class="o">...</span>
<span class="n">service</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/user/</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
</code></pre></div>
<p>Alternatively, you can pass it as a static string.
<div class="highlight"><pre><span></span><code><span class="n">service</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/user/ca80a889-8811-4e65-86bb-5e7c0c6e07cf&quot;</span><span class="p">)</span>
</code></pre></div></p>
<p>if f-strings are not cool enough for you, there is another alternative, albeit experimental, where you can pass the path-parameter(s) as kwargs in your request function.</p>
<div class="highlight"><pre><span></span><code><span class="n">service</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;/user&quot;</span><span class="p">,</span> <span class="n">user_id</span><span class="o">=</span><span class="n">user_id</span><span class="p">)</span>
<span class="c1"># or</span>
<span class="n">service</span><span class="o">.</span><span class="n">abc</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;/user/</span><span class="si">{</span><span class="n">user_id</span><span class="si">}</span><span class="s2">/comments&quot;</span><span class="p">,</span> <span class="n">comment_id</span><span class="o">=</span><span class="n">comment_id</span><span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the resource contains only one handler and that handler url contains multiple path params like this:</p>
<div class="highlight"><pre><span></span><code><span class="n">Resource</span><span class="p">(</span>
    <span class="n">route</span><span class="o">=</span><span class="s2">&quot;/user&quot;</span><span class="p">,</span>
    <span class="n">handlers</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="n">Methods</span><span class="o">.</span><span class="n">POST</span><span class="p">,</span> <span class="s2">&quot;/profile/{id:int}/comments/{comment_id:int}&quot;</span><span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>
</code></pre></div>
<p>then you can pass all the path_params as kwargs in the request by specifying the url as <code>/user</code></p>
<div class="highlight"><pre><span></span><code><span class="n">user</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/profile&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span> <span class="n">comment_id</span><span class="o">=</span><span class="mi">456</span><span class="p">)</span>
<span class="n">user</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/profile/123&quot;</span><span class="p">,</span> <span class="n">comment_id</span><span class="o">=</span><span class="mi">456</span><span class="p">)</span>
<span class="n">user</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/profile/123/comments&quot;</span><span class="p">,</span> <span class="n">comment_id</span><span class="o">=</span><span class="mi">456</span><span class="p">)</span>
<span class="n">user</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/profile/123/comments/456&quot;</span><span class="p">)</span> <span class="c1"># all 4 would work</span>
</code></pre></div>
<p>However if it contains specific paths from <code>/profile</code>, then you need to specify the sub-resource name of the specific <code>profile</code></p>
<div class="highlight"><pre><span></span><code><span class="n">Resource</span><span class="p">(</span>
    <span class="n">route</span><span class="o">=</span><span class="s2">&quot;/user&quot;</span><span class="p">,</span>
    <span class="n">handlers</span><span class="o">=</span><span class="p">[</span>
        <span class="p">(</span><span class="n">Methods</span><span class="o">.</span><span class="n">POST</span><span class="p">,</span> <span class="s2">&quot;/profile/{id:int}&quot;</span><span class="p">),</span>
        <span class="p">(</span><span class="n">Methods</span><span class="o">.</span><span class="n">POST</span><span class="p">,</span> <span class="s2">&quot;/profile/{id:int}/comments/{comment_id:int}&quot;</span><span class="p">),</span>
    <span class="p">],</span>
<span class="p">)</span>

<span class="n">user</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/profile&quot;</span><span class="p">,</span> <span class="nb">id</span><span class="o">=</span><span class="mi">123</span><span class="p">,</span> <span class="n">comments</span><span class="o">=</span><span class="mi">456</span><span class="p">)</span> <span class="c1"># wont work</span>
<span class="n">user</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/profile/123/comments/&quot;</span><span class="p">,</span> <span class="n">comments</span><span class="o">=</span><span class="mi">456</span><span class="p">)</span> <span class="c1"># will work</span>
</code></pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">About url paths</p>
<p>If the endpoint you are trying to call ends with a trailing slash (/), you need to specify the relative path to the handler also with the trailing slash (/).</p>
<p><div class="highlight"><pre><span></span><code><span class="p">(</span><span class="n">GET</span><span class="p">,</span>  <span class="s2">&quot;&quot;</span><span class="p">),</span>
<span class="p">(</span><span class="n">GET</span><span class="p">,</span> <span class="s2">&quot;/&quot;</span><span class="p">)</span>
</code></pre></div>
are considered two different handlers.
This does not apply when you are passing kwargs as path-parameters and Arrest will construct and find a match for the full path.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># both will work</span>
<span class="n">user</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/profile/123/comments&quot;</span><span class="p">,</span> <span class="n">comments</span><span class="o">=</span><span class="mi">456</span><span class="p">)</span>
<span class="n">user</span><span class="o">.</span><span class="n">post</span><span class="p">(</span><span class="s2">&quot;/profile/123/comments/&quot;</span><span class="p">,</span> <span class="n">comments</span><span class="o">=</span><span class="mi">456</span><span class="p">)</span>
</code></pre></div>
</div>
<h2 id="using-converters">Using converters<a class="headerlink" href="#using-converters" title="Permanent link">&para;</a></h2>
<p>Arrest uses converters for the following types to validate and stringify the passed kwarg path-params to construct the url.
- <code>int</code>
- <code>float</code>
- <code>str</code>
- <code>UUID</code></p>
<p>If you want to run with a custom datatype as path-param, you can add a converter and regex for it by subclassing <code>arrest.converters.Converter</code> and add the converter to Arrest by <code>add_converter(...)</code></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "..", "features": ["navigation.sections", "navigation.tabs", "content.code.copy", "toc.integrate"], "search": "../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>